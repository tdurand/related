<!doctype html>




<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
  
     
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Document Format</title>
    

    
    <meta name="description" content="The format and make up of the POST document that can be sent to the elasticsearch web application"/>
    
    
    <meta name="author" content="Dominic Tootell" />
    <meta name="copyright" content="relate it (c) 2013-2014" />
    <link rel="shortcut icon" href="/favicon.ico" />

	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="/stylesheets/foundation.css" />
    <script src="/javascripts/vendor/modernizr.js"></script>
</head>


  <body>
    

<!-- Nav Bar -->

  <header class="inner">

	<nav>	  
	  <div class="row">	  	
	    <div class="large-12 columns">	      
	      <div class="nav-bar right" style="padding-top: 30px">
	       <ul class="button-group">
	         <li><a href='/index.html' class="radius small button">Home</a></li>	         
	         <li><a href='/indexing/index.html' class="radius small button">Indexing</a><br/></li>
	         <li><a href='/searching/index.html' class="radius small button">Searching</a><br/></li>							 
	         <li><a href='/configuration/index.html' class="radius small button">Configuration</a></li>
	         <li><a href='/blog/index.html' class="radius small button">Blog</a></li>
	         <li><a href='/downloads.html'  class="radius small button">Downloads</a></li>         
	        </ul>
	      </div>
	      <h1><a href='https://github.com/tootedom/related'><img src="/images/relateitlogo.png"></a></h1>
	      <hr />
	    </div>
	  </div>
	</nav>	
</header>


  <!-- End Nav -->
  

  <div class="off-canvas-wrap">
  <div class="inner-wrap">

<nav class="tab-bar show-for-small">
  <a class="left-off-canvas-toggle menu-icon">
    <span></span>
  </a>
</nav>

<aside class="left-off-canvas-menu">

  <div class="sidebar-offcanvas">
          <h5>Documentation:</h5>          
          <nav>
            <ul class="off-canvas-list">
              <li class="heading">Indexing</li>
              
              
                
              
              

 

	
	<li><a href="/indexing/indexing1" data-search>Overview</a></li>
	


 

	
	<li><a href="/indexing/indexing2" data-search>Dates</a></li>
	


 

	
	<li><a href="/indexing/indexing3" data-search class="active">Document Format</a></li>
	


 

	
	<li><a href="/indexing/indexing4" data-search>Properties</a></li>
	


 

	
	<li><a href="/indexing/indexing5" data-search>Logging</a></li>
	


              <li class="divider"></li>
              <li class="heading">Searching</li>
              
              
                
              
              

 

	<li><a href="/searching/searching1" data-search>Overview</a></li>


 

	<li><a href="/searching/searching2" data-search>Filters</a></li>


 

	<li><a href="/searching/searching3" data-search>Logging</a></li>


 

	<li><a href="/searching/searching4" data-search>Indexes</a></li>


 

	<li><a href="/searching/searching5" data-search>Aliases</a></li>


              <li class="divider"></li>
              <li class="heading">Configuration</li>
              
              
                
              
              

 

	<li><a href="/configuration/configuration1" data-search>ES Connections</a></li>


 

	<li><a href="/configuration/configuration2" data-search>ES Type Mapping</a></li>


 

	<li><a href="/configuration/configuration3" data-search>ES Configuration</a></li>


 

	<li><a href="/configuration/configuration4" data-search>Webapp JVM</a></li>


 

	<li><a href="/configuration/configuration5" data-search>App Config</a></li>


 

	<li><a href="/configuration/configuration6" data-search>Tomcat</a></li>


 

	<li><a href="/configuration/configuration7" data-search>Diagrams</a></li>


            </ul>
          </nav>
        </div> 

 
</aside>

<a class="exit-off-canvas" href="#"></a>


  <!-- Main Page Content and Sidebar -->

  <div class="row">
        <div class="large-3 medium-4 columns">
      <div class="hide-for-small">
        <div class="sidebar">
          <h5>Documentation:</h5>          
          <nav>
            <ul class="side-nav">
              <li class="heading">Indexing</li>
              
              
                
              
              

 

	
	<li><a href="/indexing/indexing1" data-search>Overview</a></li>
	


 

	
	<li><a href="/indexing/indexing2" data-search>Dates</a></li>
	


 

	
	<li><a href="/indexing/indexing3" data-search class="active">Document Format</a></li>
	


 

	
	<li><a href="/indexing/indexing4" data-search>Properties</a></li>
	


 

	
	<li><a href="/indexing/indexing5" data-search>Logging</a></li>
	


              <li class="divider"></li>
              <li class="heading">Searching</li>
              
              
                
              
              

 

	<li><a href="/searching/searching1" data-search>Overview</a></li>


 

	<li><a href="/searching/searching2" data-search>Filters</a></li>


 

	<li><a href="/searching/searching3" data-search>Logging</a></li>


 

	<li><a href="/searching/searching4" data-search>Indexes</a></li>


 

	<li><a href="/searching/searching5" data-search>Aliases</a></li>


              <li class="divider"></li>
              <li class="heading">Configuration</li>
              
              
                
              
              

 

	<li><a href="/configuration/configuration1" data-search>ES Connections</a></li>


 

	<li><a href="/configuration/configuration2" data-search>ES Type Mapping</a></li>


 

	<li><a href="/configuration/configuration3" data-search>ES Configuration</a></li>


 

	<li><a href="/configuration/configuration4" data-search>Webapp JVM</a></li>


 

	<li><a href="/configuration/configuration5" data-search>App Config</a></li>


 

	<li><a href="/configuration/configuration6" data-search>Tomcat</a></li>


 

	<li><a href="/configuration/configuration7" data-search>Diagrams</a></li>


            </ul>
          </nav>
        </div> 
      </div>
    </div>    
    <!-- Main Blog Content -->
    <div class="large-9 medium-8 columns" role="content">
    
    <div class="magellan-container" data-magellan-expedition="fixed" style="left: auto;">
      <dl class="sub-nav">        
        
        
         
        
          <dd data-magellan-arrival="1" ><a href="/indexing/indexing1">Overview</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="2" ><a href="/indexing/indexing2">Dates</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="3" class="active"><a href="/indexing/indexing3">Document Format</a></dd>       
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="4" ><a href="/indexing/indexing4">Properties</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="5" ><a href="/indexing/indexing5">Logging</a></dd>
        
        <li class="divider">|</li>
                
      </dl>
</div>      

    <h1><a href="/indexing/indexing3">Document Format</a></h1>
    <p>The related items document that is POST’ed to the indexing web application has a couple of keys that it refers to:</p>

<ul>
<li>”<strong>items</strong>”: An array of items that are related, i.e. just been purchased together</li>

<li>”<strong>id</strong>”: The id of the item, this is your identify for the item, for example the Product Id.</li>

<li>”<strong>date</strong>”: The date at which the related items were created, i.e. the purchase time</li>
</ul>

<p>Example:</p>

<pre><code>{
    &quot;date&quot;: &quot;2013-12-24T09:44:41.943+10:00&quot;, 
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;1&quot;      
        }, 
        {
            &quot;id&quot;: &quot;2&quot; 
        } 
    ] 
}</code></pre>

<p>Or in short form:</p>

<pre><code>{
    &quot;date&quot;: &quot;2013-12-24T09:44:41.943+10:00&quot;, 
    &quot;items&quot;: [ &quot;1&quot;,&quot;2&quot; ]
}</code></pre>

<p>The short form of the post makes the assumption that the strings in the ”<strong>items</strong>” array are the ”<strong>id</strong>“‘s</p>

<p>As previously seen the indexing POST document can contain extra keys and values that are associated to either the related items POST in it’s entirety, or can be specific to a particular item in the related items document.</p>

<p>For example:</p>

<pre><code>{
    &quot;date&quot;: &quot;2013-12-24T09:44:41.943+10:00&quot;, 
    &quot;site&quot;: &quot;amazon&quot;, 
    &quot;channel&quot; : &quot;uk&quot;,       
    &quot;items&quot;: [
        {
            &quot;department&quot; : &quot;electronics&quot;,
            &quot;category&quot; : &quot;storage&quot;,
            &quot;type&quot; : &quot;hard disk&quot;,
            &quot;id&quot;: &quot;1&quot;,      
        }, 
        {
            &quot;department&quot; : &quot;electronics&quot;,
            &quot;category&quot; : &quot;notebooks&quot;,
            &quot;type&quot; : &quot;macbook pro&quot;,
            &quot;memory&quot; : &quot;8gb&quot;,
            &quot;channel&quot; : &quot;de&quot;,
            &quot;id&quot;: &quot;2&quot;, 
        } 
    ] 
}</code></pre>

<p>Given the above the key/value: <strong>“site”: “amazon”</strong>, will apply to all the related item documents that are indexed in elasticsearch (2 documents in the above). The key/value pairs within the “items” array will apply just to that item’s document that is indexed.</p>

<p>Document with “id”: “1” will have the key/values:</p>

<pre><code>&quot;date&quot;: &quot;2013-12-23T23:44:41.943&quot;
&quot;site&quot;: &quot;amazon&quot;, 
&quot;channel&quot; : &quot;uk&quot;,    
&quot;department&quot; : &quot;electronics&quot;,
&quot;category&quot; : &quot;storage&quot;,
&quot;type&quot; : &quot;hard disk&quot;,    </code></pre>

<p>Document with “id” : “2” will have the key/values:</p>

<pre><code>&quot;date&quot;: &quot;2013-12-23T23:44:41.943&quot;
&quot;site&quot;: &quot;amazon&quot;, 
&quot;channel&quot; : &quot;de&quot;,    
&quot;department&quot; : &quot;electronics&quot;,
&quot;category&quot; : &quot;notebooks&quot;,
&quot;type&quot; : &quot;macbook pro&quot;,
&quot;memory&quot; : &quot;8gb&quot;</code></pre>

<p>If an element exist in the item’s property that was defined in the parent enclosing document, then the item’s value takes precedence and overrides that of the enclosing document’s setting.</p>

<p>With the above you can see that the second item has an extra field “memory”, than that of the first document. Whilst it does not make much difference to the backend (elasticsearch) or the web applications (searching or indexing), for consistencies sake you shouldn’t really have key existing in one related item that do not appear in the. However, it is entirely up to you.</p>

<!--       <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article>

      <hr />

      <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article> -->

    </div>

    <!-- End Main Content -->


    <!-- Sidebar -->

<!--     <aside class="large-3 columns">

      <h5>Categories</h5>
      <ul class="side-nav">
        <li><a href="#">News</a></li>
        <li><a href="#">Code</a></li>
        <li><a href="#">Design</a></li>
        <li><a href="#">Fun</a></li>
        <li><a href="#">Weasels</a></li>
      </ul>

      <div class="panel">
        <h5>Featured</h5>
        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow.</p>
        <a href="#">Read More &rarr;</a>
      </div>

    </aside> -->

    <!-- End Sidebar -->
  </div>

  <!-- End Main Content and Sidebar -->

      <div class="pagination-centered">
      <ul class="pagination">
      
      
      
         
        
        <li><a href="/indexing/indexing1">1</a></li>
        
      
         
        
        <li><a href="/indexing/indexing2">2</a></li>
        
      
         
        
        <li class="current"><a href="/indexing/indexing3">3</a></li>
        
      
         
        
        <li><a href="/indexing/indexing4">4</a></li>
        
      
         
        
        <li><a href="/indexing/indexing5">5</a></li>
        
      
      </ul>
    </div>

  <!-- Footer -->
  </div>
</div>
<footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-6 columns">
          <p class="copyright">&copy; relate it maintained by <a href="https://github.com/tootedom">tootedom</a></p>
        </div>
        <div class="large-6 columns">
          <ul class="inline-list right">
            <li><a href="https://github.com/tootedom/related"><i class="fa fa-github"></i> Relate it (Source)</a></li>
            <li><address><a href="mailto:dominic.tootell@relateit.io"><i class="fa fa-envelope"></i> Dominic Tootell</a></address></li>
            <li><a href="https://twitter.com/tootedom"><i class="fa fa-twitter"></i>@tootedom</a></li>
          </ul>
        </div>
      </div>
    </div>
</footer>
<script src="/javascripts/vendor/jquery.js"></script>
<script src="/javascripts/foundation/foundation.js"></script>
<script src="/javascripts/foundation/foundation.dropdown.js"></script>
<script src="/javascripts/foundation/foundation.magellan.js"></script>
<script src="/javascripts/foundation/foundation.offcanvas.js"></script>
<script>
      $(document).foundation({
        // specify the class used for active dropdowns
        active_class: 'open'
      });

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
</script>

  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47714522-1");
            pageTracker._trackPageview();
            } catch(err) {}
</script>
  </body>
</html>

