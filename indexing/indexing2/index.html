<!doctype html>




<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
   
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Relate It</title>

    
    <meta name="description" content="Relate it: Tracks Frequently Related Items." />
    
    <meta name="author" content="Dominic Tootell" />
    <meta name="copyright" content="relate it (c) 2013-2014" />
    <link rel="shortcut icon" href="http://tootedom.github.io/related/favicon.ico" />

	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="http://tootedom.github.io/related/stylesheets/foundation.css" />
    <script src="http://tootedom.github.io/related/javascripts/vendor/modernizr.js"></script>
</head>


  <body>
    

<!-- Nav Bar -->

  <header class="inner">

	<nav>	  
	  <div class="row">	  	
	    <div class="large-12 columns">	      
	      <div class="nav-bar right" style="padding-top: 30px">
	       <ul class="button-group">
	         <li><a href='http://tootedom.github.io/related/index.html' class="radius small button">Home</a></li>	         
	         <li><a href='http://tootedom.github.io/related/indexing/index.html' class="radius small button">Indexing</a><br/></li>
	         <li><a href='http://tootedom.github.io/related/searching/index.html' class="radius small button">Searching</a><br/></li>							 
	         <li><a href='http://tootedom.github.io/related/configuration/index.html' class="radius small button">Configuration</a></li>
	         <li><a href='http://tootedom.github.io/related/blog/index.html' class="radius small button">Blog</a></li>
	         <li><a href='http://tootedom.github.io/related/downloads.html'  class="radius small button">Downloads</a></li>         
	        </ul>
	      </div>
	      <h1><a href='https://github.com/tootedom/related'><img src="http://tootedom.github.io/related/images/relateitlogo.png"></a></h1>
	      <hr />
	    </div>
	  </div>
	</nav>	
</header>


  <!-- End Nav -->


  <!-- Main Page Content and Sidebar -->

  <div class="row">
    
        <div class="large-3 medium-4 columns">
      <div class="hide-for-small">
        <div class="sidebar">
          <h5>Documentation:</h5>          
          <nav>
            <ul class="side-nav">
              <li class="heading">Indexing</li>
              
              
                
              
              

 

	
	<li><a href="http://tootedom.github.io/related/indexing/indexing1" data-search>Overview</a></li>
	


 

	
	<li><a href="http://tootedom.github.io/related/indexing/indexing2" data-search class="active">Dates</a></li>
	


 

	
	<li><a href="http://tootedom.github.io/related/indexing/indexing3" data-search>Document Format</a></li>
	


 

	
	<li><a href="http://tootedom.github.io/related/indexing/indexing4" data-search>Properties</a></li>
	


 

	
	<li><a href="http://tootedom.github.io/related/indexing/indexing5" data-search>Logging</a></li>
	


              <li class="divider"></li>
              <li class="heading">Searching</li>
              
              
                
              
              

 

	<li><a href="http://tootedom.github.io/related/searching/searching1" data-search>Overview</a></li>


 

	<li><a href="http://tootedom.github.io/related/searching/searching2" data-search>Filters</a></li>


 

	<li><a href="http://tootedom.github.io/related/searching/searching3" data-search>Logging</a></li>


 

	<li><a href="http://tootedom.github.io/related/searching/searching4" data-search>Indexes</a></li>


 

	<li><a href="http://tootedom.github.io/related/searching/searching5" data-search>Aliases</a></li>


              <li class="divider"></li>
              <li class="heading">Configuration</li>
              
              
                
              
              

 

	<li><a href="http://tootedom.github.io/related/configuration/configuration1" data-search>Elasticsearch</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration2" data-search>ES Type Mapping</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration3" data-search>ES Configuration</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration4" data-search>JVM</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration5" data-search>App Config</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration6" data-search>Tomcat</a></li>


 

	<li><a href="http://tootedom.github.io/related/configuration/configuration7" data-search>Diagrams</a></li>


            </ul>
          </nav>
        </div> 
      </div>
    </div>    
    <!-- Main Blog Content -->
    <div class="large-9 medium-8 columns" role="content">
    
    <div class="magellan-container" data-magellan-expedition="fixed" style="left: auto;">
      <dl class="sub-nav">        
        
        
         
        
          <dd data-magellan-arrival="1" ><a href="http://tootedom.github.io/related/indexing/indexing1">Overview</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="2" class="active"><a href="http://tootedom.github.io/related/indexing/indexing2">Dates</a></dd>       
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="3" ><a href="http://tootedom.github.io/related/indexing/indexing3">Document Format</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="4" ><a href="http://tootedom.github.io/related/indexing/indexing4">Properties</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="5" ><a href="http://tootedom.github.io/related/indexing/indexing5">Logging</a></dd>
        
        <li class="divider">|</li>
                
      </dl>
</div>      

    <h1><a href="/indexing/indexing2">Dates</a></h1>
    <p>When a group of related items are indexed, by default they are stored in elasticsearch in a dated index, for example “relateditems-YYYY-MM-DD”:</p>

<p>Each date based index, is an index of it’s own in elasticsearch. If you were searching directly against elasticsearch you could independently search the one dated index.</p>

<p>The date of the index is based on the UTC date of either:</p>

<ul>
<li>The date contained within the RELATED ITEMS POST (converted to UTC)</li>

<li>The current date set on the server on which the indexing application is running.</li>
</ul>

<p>The previous POST contained no date. However, the following example POST contains a date that is in UTC timezone. As an index named ”<strong>relateditems-2013-12-25</strong>” will be created and the 4 related item documents indexed within that index.</p>

<pre><code>{
    &quot;channel&quot;: &quot;de&quot;, 
    &quot;date&quot;: &quot;2013-12-25T09:44:41.943&quot;, 
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;1&quot;, 
            &quot;type&quot;: &quot;map&quot;
        }, 
        {
            &quot;id&quot;: &quot;2&quot;, 
            &quot;type&quot;: &quot;compass&quot;
        }, 
        {
            &quot;id&quot;: &quot;3&quot;, 
            &quot;type&quot;: &quot;torch&quot;
        }, 
        {
            &quot;channel&quot;: &quot;uk&quot;, 
            &quot;id&quot;: &quot;4&quot;, 
            &quot;type&quot;: &quot;torch&quot;
        }
    ], 
    &quot;site&quot;: &quot;amazon&quot;
}</code></pre>

<p>As mentioned above, if the date in the related items POST contains a date with time zone information, it will be converted to UTC, and then the date used. For example, the below POST contains:</p>

<pre><code>&quot;date&quot;: &quot;2013-12-24T09:44:41.943+10:00&quot;</code></pre>

<p>Given this date, the 4 related item documents will be indexed within the index named:</p>

<pre><code>relateditems-2013-12-23</code></pre>

<p>The reason being that “2013-12-24T09:44:41.943+10:00” is “2013-12-23T23:44:41.943” in UTC timezone. The resulting 4 related documents will contain the UTC timestamp.</p>

<pre><code>{
    &quot;channel&quot;: &quot;de&quot;, 
    &quot;date&quot;: &quot;2013-12-24T09:44:41.943+10:00&quot;, 
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;1&quot;, 
            &quot;type&quot;: &quot;map&quot;
        }, 
        {
            &quot;id&quot;: &quot;2&quot;, 
            &quot;type&quot;: &quot;compass&quot;
        }, 
        {
            &quot;id&quot;: &quot;3&quot;, 
            &quot;type&quot;: &quot;torch&quot;
        }, 
        {
            &quot;channel&quot;: &quot;uk&quot;, 
            &quot;id&quot;: &quot;4&quot;, 
            &quot;type&quot;: &quot;torch&quot;
        }
    ], 
    &quot;site&quot;: &quot;amazon&quot;
}</code></pre>

<p>An example document indexed in ”<strong>relateditems-2013-12-23</strong>” looks as follows (taken from elasticsearch head):</p>

<pre><code>{
    _index: relateditems-2013-12-23
    _type: related
    _id: EmHW1qQBQv2BMgmQAlyMiA
    _version: 1
    _score: 1
    _source: {
        id: 3
        date: 2013-12-23T23:44:41.943Z
        related-with: [
            4
            1
            2
        ]
        type: torch
        site: amazon
        channel: de
    }
}</code></pre>

<p>The document itself is:</p>

<pre><code>{
    &quot;id&quot;: &quot;3&quot; ,
    &quot;date&quot;: &quot;2013-12-23T23:44:41.943Z&quot;,
    &quot;related-with&quot;: [ &quot;4&quot;,&quot;1&quot;,&quot;2&quot;],
    &quot;type&quot;: &quot;torch&quot;,
    &quot;site&quot;: &quot;amazon&quot;,
    &quot;channel&quot;: &quot;de&quot;
}    </code></pre>

<!--       <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article>

      <hr />

      <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article> -->

    </div>

    <!-- End Main Content -->


    <!-- Sidebar -->

<!--     <aside class="large-3 columns">

      <h5>Categories</h5>
      <ul class="side-nav">
        <li><a href="#">News</a></li>
        <li><a href="#">Code</a></li>
        <li><a href="#">Design</a></li>
        <li><a href="#">Fun</a></li>
        <li><a href="#">Weasels</a></li>
      </ul>

      <div class="panel">
        <h5>Featured</h5>
        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow.</p>
        <a href="#">Read More &rarr;</a>
      </div>

    </aside> -->

    <!-- End Sidebar -->
  </div>

  <!-- End Main Content and Sidebar -->

      <div class="pagination-centered">
      <ul class="pagination">
      
      
      
         
        
        <li><a href="http://tootedom.github.io/related/indexing/indexing1">1</a></li>
        
      
         
        
        <li class="current"><a href="http://tootedom.github.io/related/indexing/indexing2">2</a></li>
        
      
         
        
        <li><a href="http://tootedom.github.io/related/indexing/indexing3">3</a></li>
        
      
         
        
        <li><a href="http://tootedom.github.io/related/indexing/indexing4">4</a></li>
        
      
         
        
        <li><a href="http://tootedom.github.io/related/indexing/indexing5">5</a></li>
        
      
      </ul>
    </div>

  <!-- Footer -->
  <footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-6 columns">
          <p class="copyright">&copy; relate it maintained by <a href="https://github.com/tootedom">tootedom</a></p>
        </div>
        <div class="large-6 columns">
          <ul class="inline-list right">
            <li><a href="https://github.com/tootedom/related"><i class="fa fa-github"></i> Relate it (Source)</a></li>
            <li><address><a href="mailto:dominic.tootell@relateit.io"><i class="fa fa-envelope"></i> Dominic Tootell</a></address></li>
            <li><a href="https://twitter.com/tootedom"><i class="fa fa-twitter"></i>@tootedom</a></li>
          </ul>
        </div>
      </div>
    </div>
</footer>
<script src="http://tootedom.github.io/related/javascripts/vendor/jquery.js"></script>
<script src="http://tootedom.github.io/related/javascripts/foundation/foundation.js"></script>
<script src="http://tootedom.github.io/related/javascripts/foundation/foundation.dropdown.js"></script>
<script src="http://tootedom.github.io/related/javascripts/foundation/foundation.magellan.js"></script>
<script>
      $(document).foundation({
        // specify the class used for active dropdowns
        active_class: 'open'
      });

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
</script>

  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47714522-1");
            pageTracker._trackPageview();
            } catch(err) {}
</script>
  </body>
</html>

