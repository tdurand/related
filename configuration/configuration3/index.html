<!doctype html>




<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">   
  
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>ES Configuration</title>
    

    
    <meta name="description" content="Specifies the required settings in the elasticsearch.yml configuration for the indexing and search webapps to talk to elasticsearch"/>
    
    
    <meta name="author" content="Dominic Tootell" />
    <meta name="copyright" content="relate it (c) 2013-2014" />
    <link rel="shortcut icon" href="http://relateit.io/favicon.ico" />

	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="http://relateit.io/stylesheets/foundation.css" />
    <script src="http://relateit.io/javascripts/vendor/modernizr.js"></script>
</head>


  <body>
    

<!-- Nav Bar -->

  <header class="inner">

	<nav>	  
	  <div class="row">	  	
	    <div class="large-12 columns">	      
	      <div class="nav-bar right" style="padding-top: 30px">
	       <ul class="button-group">
	         <li><a href='http://relateit.io/index.html' class="radius small button">Home</a></li>	         
	         <li><a href='http://relateit.io/indexing/index.html' class="radius small button">Indexing</a><br/></li>
	         <li><a href='http://relateit.io/searching/index.html' class="radius small button">Searching</a><br/></li>							 
	         <li><a href='http://relateit.io/configuration/index.html' class="radius small button">Configuration</a></li>
	         <li><a href='http://relateit.io/blog/index.html' class="radius small button">Blog</a></li>
	         <li><a href='http://relateit.io/downloads.html'  class="radius small button">Downloads</a></li>         
	        </ul>
	      </div>
	      <h1><a href='https://github.com/tootedom/related'><img src="http://relateit.io/images/relateitlogo.png"></a></h1>
	      <hr />
	    </div>
	  </div>
	</nav>	
</header>


  <!-- End Nav -->
  

  <div class="off-canvas-wrap">
  <div class="inner-wrap">

<nav class="tab-bar show-for-small">
  <a class="left-off-canvas-toggle menu-icon">
    <span></span>
  </a>
</nav>

<aside class="left-off-canvas-menu">

  <div class="sidebar-offcanvas">
          <h5>Documentation:</h5>          
          <nav>
            <ul class="off-canvas-list">
              <li class="heading">Indexing</li>
              
              
                
              
              

 

	<li><a href="http://relateit.io/indexing/indexing1" data-search>Overview</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing2" data-search>Dates</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing3" data-search>Document Format</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing4" data-search>Properties</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing5" data-search>Logging</a></li>


              <li class="divider"></li>
              <li class="heading">Searching</li>
              
              
                
              
              

 

	<li><a href="http://relateit.io/searching/searching1" data-search>Overview</a></li>


 

	<li><a href="http://relateit.io/searching/searching2" data-search>Filters</a></li>


 

	<li><a href="http://relateit.io/searching/searching3" data-search>Logging</a></li>


 

	<li><a href="http://relateit.io/searching/searching4" data-search>Indexes</a></li>


 

	<li><a href="http://relateit.io/searching/searching5" data-search>Aliases</a></li>


              <li class="divider"></li>
              <li class="heading">Configuration</li>
              
              
                
              
              

 

	
	<li><a href="http://relateit.io/configuration/configuration1" data-search>ES Connections</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration2" data-search>ES Type Mapping</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration3" data-search class="active">ES Configuration</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration4" data-search>Webapp JVM</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration5" data-search>App Config</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration6" data-search>Tomcat</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration7" data-search>Diagrams</a></li>
	


            </ul>
          </nav>
        </div> 

 
</aside>

<a class="exit-off-canvas" href="#"></a>


  <!-- Main Page Content and Sidebar -->

  <div class="row">
        <div class="large-3 medium-4 columns">
      <div class="hide-for-small">
        <div class="sidebar">
          <h5>Documentation:</h5>          
          <nav>
            <ul class="side-nav">
              <li class="heading">Indexing</li>
              
              
                
              
              

 

	<li><a href="http://relateit.io/indexing/indexing1" data-search>Overview</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing2" data-search>Dates</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing3" data-search>Document Format</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing4" data-search>Properties</a></li>


 

	<li><a href="http://relateit.io/indexing/indexing5" data-search>Logging</a></li>


              <li class="divider"></li>
              <li class="heading">Searching</li>
              
              
                
              
              

 

	<li><a href="http://relateit.io/searching/searching1" data-search>Overview</a></li>


 

	<li><a href="http://relateit.io/searching/searching2" data-search>Filters</a></li>


 

	<li><a href="http://relateit.io/searching/searching3" data-search>Logging</a></li>


 

	<li><a href="http://relateit.io/searching/searching4" data-search>Indexes</a></li>


 

	<li><a href="http://relateit.io/searching/searching5" data-search>Aliases</a></li>


              <li class="divider"></li>
              <li class="heading">Configuration</li>
              
              
                
              
              

 

	
	<li><a href="http://relateit.io/configuration/configuration1" data-search>ES Connections</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration2" data-search>ES Type Mapping</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration3" data-search class="active">ES Configuration</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration4" data-search>Webapp JVM</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration5" data-search>App Config</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration6" data-search>Tomcat</a></li>
	


 

	
	<li><a href="http://relateit.io/configuration/configuration7" data-search>Diagrams</a></li>
	


            </ul>
          </nav>
        </div> 
      </div>
    </div>
    <!-- Main Blog Content -->
    <div class="large-9 medium-8 columns" role="content">
    
    <div class="magellan-container" data-magellan-expedition="fixed" style="left: auto;">
      <dl class="sub-nav">        
        
        
         
        
          <dd data-magellan-arrival="1" ><a href="http://relateit.io/configuration/configuration1">ES Connections</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="2" ><a href="http://relateit.io/configuration/configuration2">ES Type Mapping</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="3" class="active"><a href="http://relateit.io/configuration/configuration3">ES Configuration</a></dd>       
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="4" ><a href="http://relateit.io/configuration/configuration4">Webapp JVM</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="5" ><a href="http://relateit.io/configuration/configuration5">App Config</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="6" ><a href="http://relateit.io/configuration/configuration6">Tomcat</a></dd>
        
        <li class="divider">|</li>
        
         
        
          <dd data-magellan-arrival="7" ><a href="http://relateit.io/configuration/configuration7">Diagrams</a></dd>
        
        <li class="divider">|</li>
                
      </dl>
</div>      

    <h1><a href="/configuration/configuration3">ES Configuration</a></h1>
    <p>The elasticsearch server itself also requires some configuration. By default out of the box elastic search will use multicast to locate other nodes in the cluster, and will locally store indexes inside the <code>data/</code> directory in the elasticsearch download installation location. You will more than likely want to make changes to this configuration, for example:</p>

<pre><code>* Move to unicast if your network does not cope with multicast traffic routing well (i.e. multiple data centres, etc.)
* Move the local storage to a raid array, with raid 1, 5 or raid 1+0 (10), away from the data/ directory.  So that you can update the elasticsearch binaries without affecting the data indexed.</code></pre>

<p>The elasticsearch configuration file (<code>config/elasticsearch.yml</code>), needs to be updated to reflect the default cluster name that the indexing and searching application will be looking for the elasticsearch cluster/nodes to be operating with (the default being <code>relateditems</code>). The name of the cluster is controlled by the following property on the Searching or Indexing web application:</p>

<pre><code>related-item.storage.cluster.name</code></pre>

<p>Therefore the elasticsearch configuration (<code>config/elasticsearch.yml</code>) should have the following set:</p>

<pre><code>cluster.name: relateditems</code></pre>

<p>There are several other properties that are not by default in the elasticsearch.yml file, that assist in its operations (searching, bulk operations, getting and indexing). The following configuration reduces the size of the queue, and the maximum number of threads that elasticsearch can run of the given operations. By changing the defaults we are allowing existing operations to complete, without flooding it with more requests until it is unable to cope with the load. As a result we bound the size of the pools and queues, in order to apply back pressure to the request’s origin (I.e. The search application and the indexing application)</p>

<p>These pool settings are as follows. The settings a highly dependent upon the size of your elastic search cluster. This is just a set of recommendations.</p>

<h3 id="search_pool">Search pool</h3>

<pre><code>threadpool.search.type: fixed
threadpool.search.size: 20
threadpool.search.queue_size: 100000</code></pre>

<h3 id="bulk_pool">Bulk pool</h3>

<pre><code>threadpool.bulk.type: fixed
threadpool.bulk.size: 25
threadpool.bulk.queue_size: 100000</code></pre>

<h3 id="get_pool">Get Pool</h3>

<pre><code>threadpool.get.type: fixed
threadpool.get.size: 1
threadpool.get.queue_size: 1</code></pre>

<h3 id="index_pool">Index pool</h3>

<pre><code>threadpool.index.type: fixed
threadpool.index.size: 20
threadpool.index.queue_size: 100000</code></pre>

<!--       <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article>

      <hr />

      <article>

        <h3><a href="#">Blog Post Title</a></h3>
        <h6>Written by <a href="#">John Smith</a> on August 12, 2012.</h6>

        <div class="row">
          <div class="large-6 columns">
            <p>Bacon ipsum dolor sit amet nulla ham qui sint exercitation eiusmod commodo, chuck duis velit. Aute in reprehenderit, dolore aliqua non est magna in labore pig pork biltong. Eiusmod swine spare ribs reprehenderit culpa.</p>
            <p>Boudin aliqua adipisicing rump corned beef. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>
          </div>
          <div class="large-6 columns">
            <img src="http://placehold.it/400x240&text=[img]" />
          </div>
        </div>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow. Nulla corned beef sunt ball tip, qui bresaola enim jowl. Capicola short ribs minim salami nulla nostrud pastrami.</p>

      </article> -->

    </div>

    <!-- End Main Content -->


    <!-- Sidebar -->

<!--     <aside class="large-3 columns">

      <h5>Categories</h5>
      <ul class="side-nav">
        <li><a href="#">News</a></li>
        <li><a href="#">Code</a></li>
        <li><a href="#">Design</a></li>
        <li><a href="#">Fun</a></li>
        <li><a href="#">Weasels</a></li>
      </ul>

      <div class="panel">
        <h5>Featured</h5>
        <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon nulla pork belly cupidatat meatloaf cow.</p>
        <a href="#">Read More &rarr;</a>
      </div>

    </aside> -->

    <!-- End Sidebar -->
  </div>

  <!-- End Main Content and Sidebar -->

      <div class="pagination-centered">
      <ul class="pagination">
      
      
      
         
        
        <li><a href="http://relateit.io/configuration/configuration1">1</a></li>
        
      
         
        
        <li><a href="http://relateit.io/configuration/configuration2">2</a></li>
        
      
         
        
        <li class="current"><a href="http://relateit.io/configuration/configuration3">3</a></li>
        
      
         
        
        <li><a href="http://relateit.io/configuration/configuration4">4</a></li>
        
      
         
        
        <li><a href="http://relateit.io/configuration/configuration5">5</a></li>
        
      
         
        
        <li><a href="http://relateit.io/configuration/configuration6">6</a></li>
        
      
         
        
        <li><a href="http://relateit.io/configuration/configuration7">7</a></li>
        
      
      </ul>
    </div>

  <!-- Footer -->
  </div>
</div>
<footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-6 columns">
          <p class="copyright">&copy; relate it maintained by <a href="https://github.com/tootedom">tootedom</a></p>
        </div>
        <div class="large-6 columns">
          <ul class="inline-list right">
            <li><a href="https://github.com/tootedom/related"><i class="fa fa-github"></i> Relate it (Source)</a></li>
            <li><address><a href="mailto:dominic.tootell@relateit.io"><i class="fa fa-envelope"></i> Dominic Tootell</a></address></li>
            <li><a href="https://twitter.com/tootedom"><i class="fa fa-twitter"></i>@tootedom</a></li>
          </ul>
        </div>
      </div>
    </div>
</footer>
<script src="http://relateit.io/javascripts/vendor/jquery.js"></script>
<script src="http://relateit.io/javascripts/foundation/foundation.js"></script>
<script src="http://relateit.io/javascripts/foundation/foundation.dropdown.js"></script>
<script src="http://relateit.io/javascripts/foundation/foundation.magellan.js"></script>
<script src="http://relateit.io/javascripts/foundation/foundation.offcanvas.js"></script>
<script>
      $(document).foundation({
        // specify the class used for active dropdowns
        active_class: 'open'
      });

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
</script>

  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47714522-1");
            pageTracker._trackPageview();
            } catch(err) {}
</script>
  </body>
</html>

